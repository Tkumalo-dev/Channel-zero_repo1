<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Branches Map - Channel Zero</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        font-family: "Poppins", sans-serif;
      }

      #map-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
      }

      .map-header {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 1000;
        background: rgba(255, 255, 255, 0.95);
        padding: 15px 30px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      }

      .back-button {
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 1000;
        background-color: #007bff;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 8px;
        text-decoration: none;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      }

      .back-button:hover {
        background-color: #0056b3;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }

      /* Custom popup styles */
      .leaflet-popup-content {
        margin: 10px;
      }

      .leaflet-popup-content b {
        color: #007bff;
        font-size: 16px;
      }
    </style>
  </head>
  <body>
    <a href="dashboard(Lutho_Version).php" class="back-button"
      >&larr; Back to Dashboard</a
    >
    <div class="map-header">
      <h1>Branch Locations</h1>
    </div>
    <div id="map-container"></div>

    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Initialize map
        var map = L.map("map-container", {
          zoomControl: true,
          scrollWheelZoom: true,
        }).setView([-26.2041, 28.0473], 10);

        // Add tile layer
        L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
          maxZoom: 18,
          attribution:
            '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
        }).addTo(map);

        // Branch data
        const branches = [
          {
            lat: -26.1952,
            lng: 28.0341,
            name: "Sandton Branch",
            address: "123 Main St, Sandton",
          },
          {
            lat: -26.212,
            lng: 28.055,
            name: "Rosebank Branch",
            address: "456 Oak Ave, Rosebank",
          },
          {
            lat: -26.2023,
            lng: 28.0436,
            name: "CBD Branch",
            address: "789 Market St, JHB CBD",
          },
          {
            lat: -26.1224,
            lng: 28.051,
            name: "Fourways Branch",
            address: "101 Cedar Rd, Fourways",
          },
          {
            lat: -26.078,
            lng: 28.0079,
            name: "Randburg Branch",
            address: "202 Bram Fischer Dr, Randburg",
          },
        ];

        // Create markers
        const markers = L.featureGroup();

        branches.forEach((branch) => {
          const marker = L.marker([branch.lat, branch.lng]).bindPopup(
            `<b>${branch.name}</b><br>${branch.address}`
          );
          marker.addTo(map);
          markers.addLayer(marker);
        });

        // Fit map to show all markers
        if (markers.getLayers().length > 0) {
          map.fitBounds(markers.getBounds().pad(0.2));
        }

        // Handle window resize
        window.addEventListener("resize", function () {
          map.invalidateSize();
        });
      });
    </script>
  </body>
</html>
